<%= render "shared/admin/nav", { header_title: "Nueva Compra" } do %>
<% end %>

<div class="container mx-auto px-4 py-8" data-controller="purchase-form">
  <div class="bg-white rounded-lg shadow p-6 mb-6">
    <h2 class="text-lg font-semibold mb-4">Seleccionar Orden de Compra (Opcional)</h2>
    <div class="mb-4">
      <label for="purchase_order_select" class="block text-sm font-medium text-gray-700 mb-1">Orden de Compra</label>
      <select id="purchase_order_select" 
        class="form-input mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"
        data-controller="select"
        data-action="change->purchase-form#handlePurchaseOrderSelection"
        data-select-placeholder-value="Seleccionar Orden de Compra"
        data-select-dropdown-parent-value="body">
        <option value="">Seleccionar Orden de Compra</option>
        <% @purchase_orders.each do |po| %>
          <option value="<%= po.id %>"><%= "#{po.custom_id} - #{po.vendor.name} (#{po.translated_status})" %></option>
        <% end %>
      </select>
    </div>
  </div>

  <div class="bg-white rounded-lg shadow p-6">
    <%= render "form", purchase: @purchase %>
  </div>
</div>
