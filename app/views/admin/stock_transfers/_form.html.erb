<%= simple_form_for([:admin, @stock_transfer], html: { data: { controller: "stock-transfer-form", action: "submit->stock-transfer-form#submitForm", "stock-transfer-form-target" => "form" } }) do |form| %>
  <!-- Header Section -->
  <div class="p-6 mb-8 bg-white border border-gray-200 rounded-lg shadow-md dark:bg-slate-800 dark:border-slate-700">
    <div class="grid items-center grid-cols-1 gap-6 mb-5 sm:grid-cols-2 sm:gap-x-16 sm:gap-y-10">
      <!-- Origin Warehouse -->
      <div>
        <%= form.label :origin_warehouse_id, "Almacén de Origen", class: "form-label" %>
        <%= form.collection_select :origin_warehouse_id, Warehouse.all, :id, :name, { include_blank: 'Ninguno (Inventario Inicial)' }, class: "form-input" %>
      </div>

      <!-- Destination Warehouse -->
      <div>
        <%= form.label :destination_warehouse_id, "Almacén de Destino", class: "form-label" %>
        <%= form.collection_select :destination_warehouse_id, Warehouse.all, :id, :name, {}, class: "form-input" %>
      </div>
    </div>

    <div class="grid items-center grid-cols-1 gap-6 sm:grid-cols-2 sm:gap-x-16 sm:gap-y-10">
      <div>
        <%= form.label :guia, "Número de Guía", class: "form-label" %>
        <%= form.text_field :guia, class: "form-input" %>
      </div>

      <!-- Transfer Date -->
      <div>
        <%= form.label :transfer_date, "Fecha de Traslado", class: "form-label" %>
        <%= form.datetime_local_field :transfer_date, class: "form-input" %>
      </div>
    </div>

    <!-- Comments Field -->
    <div class="mt-4">
      <%= form.label :comments, "Comentarios", class: "form-label" %>
      <%= form.text_area :comments, class: "form-input" %>
    </div>
  </div>

  <!-- Products Section -->
    <div class="p-6 mb-8 bg-white border border-gray-200 rounded-lg shadow-md dark:bg-slate-800 dark:border-slate-700">
      <h3 class="mb-4 text-lg font-semibold text-slate-900 dark:text-slate-100">Productos</h3>
      <div id="stock-transfer-form-lines" data-stock-transfer-form-target="lines">
        <%= form.simple_fields_for :stock_transfer_lines do |line_form| %>
          <%= render 'stock_transfer_line_fields', f: line_form %>
        <% end %>
      </div>

      <!-- Add Product Button -->
      <div class="flex justify-end mt-4">
        <button type="button" class="btn btn-secondary" data-action="click->stock-transfer-form#addProduct">Agregar Producto</button>
      </div>
    </div>

    <!-- Form Actions -->
    <div class="flex items-center py-6 mt-10 space-x-4 border-t dark:border-slate-600">
      <%= form.button :submit, @stock_transfer.new_record? ? "Crear Transferencia de Stock" : "Grabar Transferencia de Stock", class: "btn btn-primary" %>
      <%= link_to "Cancelar", admin_stock_transfers_path, class: "font-medium text-slate-600 hover:text-primary-600 text-sm px-2 py-2 dark:text-slate-400 dark:hover:text-primary-400" %>
    </div>
  
<% end %>