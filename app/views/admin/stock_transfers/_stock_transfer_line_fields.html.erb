<div class="flex items-center mb-4 space-x-4 nested-fields" data-stock-transfer-form-target="line">
  <!-- Product Field -->
  <div class="flex items-center flex-1">
    <%= f.label :product_id, "Producto", class: "form-label mr-2 w-24 text-right" %>
    <select data-controller="select"
            data-select-model-value="Product"
            data-select-multi-select-value="false"
            data-select-placeholder-value="Selecciona un producto"
            name="<%= f.object_name %>[product_id]" 
            class="flex-1 form-input">
      <option value="" <%= 'selected' if f.object.product_id.blank? %>>Selecciona un producto</option>
      <% Product.all.each do |product| %>
        <option value="<%= product.id %>" <%= 'selected' if f.object.product_id == product.id %>><%= product.name %></option>
      <% end %>
    </select>
  </div>

  <!-- Quantity Field -->
  <div class="flex items-center w-48">
    <%= f.label :quantity, "Cant", class: "form-label mr-2 w-16 text-right" %>
    <%= f.number_field :quantity, class: "form-input w-20", step: 1 %>
  </div>

  <!-- Remove Product Icon -->
  <div class="flex items-end">
    <button type="button" class="p-2 text-red-500 hover:text-red-700" data-action="click->stock-transfer-form#removeProduct">
      <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 12H4" />
      </svg>
    </button>
  </div>
</div>