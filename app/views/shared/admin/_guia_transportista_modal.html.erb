<div id="guia-transportista-modal" class="flex hidden overflow-y-auto fixed inset-0 z-50 justify-center items-center bg-black bg-opacity-50">
  <div class="p-6 w-full max-w-lg bg-white rounded-lg shadow-lg">
    <div class="flex justify-between items-center mb-4">
      <h2 class="text-xl font-semibold">Generar Guía de Transportista</h2>
      <button type="button" class="text-gray-400 hover:text-gray-700" onclick="document.getElementById('guia-transportista-modal').classList.add('hidden'); document.body.classList.remove('overflow-hidden');">×</button>
    </div>
    <%= form_with url: admin_generate_guia_path, method: :post, local: true do |f| %>
      <%= hidden_field_tag :source_type, 'guia_transporte' %>
      <%= hidden_field_tag :source_id, @order.id %>
      <div class="mb-4">
        <label class="block mb-1 font-medium">Transportista</label>
        <%= f.collection_select :transportista_id, @transportistas, :id, :display_name, { prompt: 'Selecciona un transportista' }, class: 'form-input w-full' %>
      </div>
      <div class="mb-4">
        <label class="block mb-1 font-medium">Dirección de Origen</label>
        <%= f.text_field :guia_origin_address, value: @order.location&.address, class: 'form-input w-full' %>
      </div>
      <div class="mb-4">
        <label class="block mb-1 font-medium">Dirección de Destino</label>
        <%= f.text_field :guia_destination_address, value: @order.customer&.address, class: 'form-input w-full' %>
      </div>
      <div class="mb-4">
        <label class="block mb-1 font-medium">Comentarios</label>
        <%= f.text_area :guia_comments, value: @order.seller_note, class: 'form-input w-full' %>
      </div>
      <div class="flex justify-end mt-4 space-x-4">
        <button type="button" class="btn btn-secondary" onclick="document.getElementById('guia-transportista-modal').classList.add('hidden'); document.body.classList.remove('overflow-hidden');">Cancelar</button>
        <%= f.submit 'Generar Guía', class: 'btn btn-primary' %>
      </div>
    <% end %>
  </div>
</div>
